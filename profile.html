<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>14-22127104-22127427</title>
  <link rel="stylesheet" href="css/profile.css" />
  <link rel="stylesheet" href="css/layout.css" />
  <link rel="stylesheet" href="css/overlay.css">
  <link rel="shortcut icon" href="assets/favicon.ico" type="image/x-icon">
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,700;1,100;1,300;1,400&display=swap"
    rel="stylesheet" />

  <style>
    #modalOverlay_1 {
      display: none;
      /* Ẩn modal mặc định khi load trang */
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      justify-content: center;
      align-items: center;
    }
  </style>
</head>

<body>
  <div class="container">
    <header class="header">
      <div class="header__container">
        <div class="header__padding"></div>
        <div class="header__link">
          <a class="header__link--logo header__transition" href="index.html">
            <img class="header__link--logo-img" src="image/Threads Black Icon Logo Vector.svg" alt="Thread Logo" />
          </a>
        </div>
        <div class="header__control">
          <div class="header__control--button-container">
            <a href="index.html" class="header__control--link" data-active-icon="bxs-home-alt-2"
              data-default-icon="bx-home-alt-2">
              <i class="bx bx-home-alt-2 header__control--button"></i>
            </a>
          </div>
          <div class="header__control--button-container">
            <a href="search.html" class="header__control--link" data-active-icon="bxs-search"
              data-default-icon="bx-search">
              <i class="bx bx-search header__control--button"></i>
            </a>
          </div>
          <div class="header__control--button-container">
            <a href="#" id="openModalIcon" class="header__control--link" data-active-icon="bxs-edit-alt"
              data-default-icon="bx-edit-alt">
              <i class="bx bx-edit-alt header__control--button"></i>
            </a>
          </div>
          <div class="header__control--button-container">
            <a href="notification.html" class="header__control--link" data-active-icon="bxs-heart"
              data-default-icon="bx-heart">
              <i class="bx bx-heart header__control--button"></i>
            </a>
          </div>
          <div class="header__control--button-container">
            <a href="profile.html" class="header__control--link" data-active-icon="bxs-user"
              data-default-icon="bx-user">
              <i class="bx bx-user header__control--button"></i>
            </a>
          </div>
        </div>
        <div class="header__menu">
          <input hidden id="header__menu--toggle" type="checkbox" />
          <label class="header__menu--label" for="header__menu--toggle">
            <i class="bx bx-menu-alt-right header__menu--button"></i>
          </label>
          <div class="header__menu--list">
            <div class="header__menu--item">
              <a href="login.html" style="text-decoration: none; color: black;">Log out</a>
            </div>
            <div class="header__menu--item">Settings</div>
            <div class="header__menu--item">Support</div>
          </div>
        </div>
      </div>
      <div class="header__bottom">
        <div class="header__control--button-container">
          <a href="index.html" class="header__control--link" data-active-icon="bxs-home-alt-2"
            data-default-icon="bxs-home-alt-2">
            <i class="bx bx-home-alt-2 header__control--button"></i>
          </a>
        </div>
        <div class="header__control--button-container">
          <a href="search.html" class="header__control--link" data-active-icon="bxs-search"
            data-default-icon="bx-search">
            <i class="bx bx-search header__control--button"></i>
          </a>
        </div>
        <div class="header__control--button-container">
          <a href="post.html" class="header__control--link" data-active-icon="bxs-edit-alt" data-default-icon="bx-edit-alt">
            <i class="bx bx-edit-alt header__control--button"></i>
          </a>
        </div>
        <div class="header__control--button-container">
          <a href="notification.html" class="header__control--link" data-active-icon="bxs-heart"
            data-default-icon="bx-heart">
            <i class="bx bx-heart header__control--button"></i>
          </a>
        </div>
        <div class="header__control--button-container">
          <a href="profile.html" class="header__control--link" data-active-icon="bxs-user" data-default-icon="bx-user">
            <i class="bx bx-user header__control--button"></i>
          </a>
        </div>
      </div>
    </header>

    <section class="main">
      <div class="main__content">
        <div class="user__infor">
          <div class="user__infor--account">
            <span class="user__name">rmuhm</span>
            <span class="user__username">rmuhm_</span>
          </div>
          <div class="user__avatar">
            <!-- <img class="user__avatar--image" src="image/image.png" alt="User Avatar" /> -->
            <i class="bi bi-person-circle"></i>
          </div>
        </div>
        <div class="user__bio">tiểu sử</div>
        <div class="user__social">
          <div class="user__social--follow">
            <span class="user__social--follow-infor">2 followers</span>
          </div>
          <div class="user__social--link">
            <a href="#"><i class="bx bxl-instagram user__social--icon"></i></a>
            <a href="#"><i class="bx bxl-facebook user__social--icon"></i></a>
          </div>
        </div>
        <div class="profile__edit">
          <button class="profile__edit--button">Edit Profile</button>
        </div>
        <div class="profile__status">
          <div class="profile__status--header profile__status--header-active">Threads</div>
          <div class="profile__status--header">Replies</div>
          <div class="profile__status--header">Reposts</div>
        </div>
      </div>
    </section>
  </div>

  <div class="modal-overlay_1" id="modalOverlay_1">
    <div class="modal-content_1">
      <!-- <span class="close-button" id="closeButton">&times;</span> -->

      <!-- Khối ảnh đại diện -->
      <div class="modal-avatar_1">
        <!-- <img src="image/image.png" alt="Avatar" class="modal-avatar_1-image-1"> -->
        <i class="bi bi-person-circle modal-avatar_1-image-1"></i>
      </div>

      <div class="profile-section_1">
        <label class="profile-label_1">Display Name</label>
        <input type="text" class="profile-input-display" />
      </div>

      <div class="profile-section_1">
        <label class="profile-label_1">Bio</label>
        <input type="text" class="profile-input" />
      </div>

      <div class="profile-section_1">
        <label class="profile-label_1">Link</label>
        <input type="text" class="profile-input" placeholder="+ Add link" />
      </div>

      <div class="profile-section_1 switch-container">
        <label class="profile-label_1">Private Profile</label>
        <label class="switch">
          <input type="checkbox">
          <span class="slider"></span>
        </label>
      </div>

      <button class="done-button" id="doneButton">Done</button>
    </div>
  </div>

  <div class="modal-overlay" id="modalOverlay" style="display: none;  border-radius: 18px;">
    <div class="modal-content">
      <div class="main-part">
        <div class="part">
          <div class="left-body">
            <div class="modal-avatar">
              <i class="bi bi-person-circle"></i>
            </div>
          </div>

          <div class="post-body">
            <div class="name">rmuhm_</div>
            <textarea id="text-post-popup" placeholder="Start a thread..." rows="3" cols="50"></textarea>
            <div class="attachments">
              <div class="attachment-item">
                <i class="bi bi-image"></i>
              </div>
              <div class="attachment-item">
                <i class="bi bi-hash"></i>
              </div>
              <div class="attachment-item">
                <i class="bi bi-bar-chart"></i>
              </div>

            </div>
          </div>
        </div>

        <div class="add-threads">
          <div class="small-modal-avatar">
            <i class="bi bi-person-circle" id="small-avatar"></i>
          </div>
          <input type="text" placeholder="Add to Threads..." class="add-thread-input" disabled>
        </div>
      </div>

      <div class="modal-footer">
        <p class="reply-info">Your followers can reply</p>
        <button class="main_post-button" id="post-button-box">Post</button>
      </div>
    </div>
  </div>

  <script>
    // Lấy tất cả các liên kết biểu tượng
    const iconLinks = document.querySelectorAll('.header__control--link');

    // Thêm sự kiện nhấp cho mỗi liên kết
    iconLinks.forEach(link => {
      link.addEventListener('click', () => {
        // Xóa trạng thái "đã chọn" khỏi tất cả các biểu tượng khác
        iconLinks.forEach(l => {
          const icon = l.querySelector('i');
          icon.className = `bx ${l.dataset.defaultIcon} header__control--button`;
          l.classList.remove('header__control--link-selected');
        });

        // Thêm trạng thái "đã chọn" cho biểu tượng được nhấp
        const icon = link.querySelector('i');
        icon.className = `bx ${link.dataset.activeIcon} header__control--button`;
        link.classList.add('header__control--link-selected');

        // Không cần event.preventDefault() vì muốn chuyển hướng sang trang khác
      });
    });

    // Mặc định cho icon User có màu đen khi tải trang
    const userLink = document.querySelector('.header__control--link[href="profile.html"]');
    if (userLink) {
      const userIcon = userLink.querySelector('i');
      userLink.classList.add('header__control--link-selected');
      userIcon.className = `bx ${userLink.dataset.activeIcon} header__control--button`;
      userIcon.style.color = 'black';
    }

    // Lấy tất cả các tab
    const statusHeaders = document.querySelectorAll('.profile__status--header');

    // Thêm sự kiện nhấp vào mỗi tab
    statusHeaders.forEach(header => {
      header.addEventListener('click', () => {
        // Xóa lớp 'profile__status--header-active' khỏi tất cả các tab
        statusHeaders.forEach(h => h.classList.remove('profile__status--header-active'));
        // Thêm lớp 'profile__status--header-active' vào tab được nhấn
        header.classList.add('profile__status--header-active');
      });
    });
  </script>

  <script>
    // Lấy các phần tử cần thiết
    const editProfileButton = document.querySelector('.profile__edit--button');
    const modalOverlay_1 = document.getElementById('modalOverlay_1');
    // const closeButton = document.getElementById('closeButton');
    const doneButton = document.querySelector('.done-button'); // Sử dụng querySelector

    // Hiển thị modal khi nhấn vào "Edit Profile"
    editProfileButton.addEventListener('click', () => {
      modalOverlay_1.style.display = 'flex';
    });

    // Đóng modal khi nhấn vào nút đóng
    // closeButton.addEventListener('click', () => {
    //   modalOverlay_1.style.display = 'none';
    // });

    // Đóng modal khi nhấn vào nút Done
    doneButton.addEventListener('click', () => {
      modalOverlay_1.style.display = 'none';
    });

    // Đóng modal khi nhấn ra ngoài modal
    modalOverlay_1.addEventListener('click', (event) => {
      if (event.target === modalOverlay_1) {
        modalOverlay_1.style.display = 'none';
      }
    });

  </script>

  <script>
    const modalOverlay = document.getElementById('modalOverlay');
    const postButton = document.querySelector('#post-button-box'); // Sử dụng querySelector
    const iconButton = document.getElementById('openModalIcon'); // Thêm phần này để bắt sự kiện nhấn vào icon

    // Thêm sự kiện mở modal khi click vào icon
    iconButton.addEventListener('click', (event) => {
      event.preventDefault(); // Ngăn chặn hành vi mặc định của thẻ <a>
      modalOverlay.style.display = 'flex';
    });

    // Đóng modal khi nhấn vào nút postButton
    postButton.addEventListener('click', () => {
      modalOverlay.style.display = 'none';
    });

    // Đóng modal khi nhấn ra ngoài modal
    modalOverlay.addEventListener('click', (event) => {
      if (event.target === modalOverlay) {
        modalOverlay.style.display = 'none';
      }
    });

    // Ngăn modal đóng khi click vào modal-content
    document.querySelector('.modal-content').addEventListener('click', function (e) {
      e.stopPropagation();
    });

    // Đảm bảo input hoạt động khi người dùng nhập vào
    document.getElementById('text-post-popup').addEventListener('input', function () {
      const addThreadInput = document.querySelector('.add-thread-input');
      addThreadInput.disabled = !this.value.trim();
    });

    // Xử lý sự kiện khi click vào add-thread-input
    document.querySelector('.add-thread-input').addEventListener('click', function () {
      if (!this.disabled) {
        const newPart = document.createElement('div');
        newPart.className = 'part';
        newPart.innerHTML = `
  <div class="left-body">
      <div class="modal-avatar">
          <i class="bi bi-person-circle"></i>
      </div>
  </div>
  <div class="post-body">
      <div class="name">rmuhm_</div>
      <textarea class="text-post-popup" placeholder="Start a thread..." rows="3" cols="50" style="resize:none"></textarea>
      <div class="attachments">
          <div class="attachment-item">
              <i class="bi bi-image"></i>
          </div>
          <div class="attachment-item">
              <i class="bi bi-hash"></i>
          </div>
          <div class="attachment-item">
              <i class="bi bi-bar-chart"></i>
          </div>
      </div>
  </div>`;

        const mainPart = document.querySelector('.main-part');
        const addThreads = document.querySelector('.add-threads');
        mainPart.insertBefore(newPart, addThreads);

        // Disable the add-thread-input
        this.disabled = true;

        // Add event listener to the new textarea
        const newTextarea = newPart.querySelector('.text-post-popup');
        newTextarea.addEventListener('input', function () {
          const addThreadInput = document.querySelector('.add-thread-input');
          const allTextareas = document.querySelectorAll('.text-post-popup');
          const lastTextarea = allTextareas[allTextareas.length - 1];
          addThreadInput.disabled = !lastTextarea.value.trim();
        });
      }
    });

    // Initial event listener for the first text-post-popup
    document.getElementById('text-post-popup').addEventListener('input', function () {
      const addThreadInput = document.querySelector('.add-thread-input');
      addThreadInput.disabled = !this.value.trim();
    });

  </script>
</body>

</html>